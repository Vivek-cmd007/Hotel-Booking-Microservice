package com.bookingservice.controller;

import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import com.bookingservice.entity.BookingDetails;
import com.bookingservice.model.BookingPayload;
import com.bookingservice.service.BookingDetailsService;

@RestController
@RequestMapping("/bookings")
public class BookingDetailsController {

  @Autowired
  BookingDetailsService bookingDetailsService;

  @GetMapping("/{Id}")
  public ResponseEntity<BookingPayload> getBookingDetails(@PathVariable("Id") int bookingId) {
    BookingPayload bookingDetails = bookingDetailsService.getBookingDetailsById(bookingId);
  
      return new ResponseEntity<>(bookingDetails,HttpStatus.OK);
    }

  @PostMapping("/save")
  public ResponseEntity<BookingDetails> createBookingDetails(@RequestBody BookingDetails bookingDetails) {
    return new ResponseEntity<BookingDetails>(bookingDetailsService.createBookingDetails(bookingDetails),HttpStatus.CREATED);
   
  }

  @PutMapping("/update")
  public ResponseEntity<BookingDetails> updateBooking(@RequestBody int bookingId, BookingDetails bookingDetails){
	  return new ResponseEntity<BookingDetails>(bookingDetailsService.updateBookingDetails(bookingId, bookingDetails),HttpStatus.OK);
  }

  @GetMapping("/getAll")
  public ResponseEntity<List<BookingDetails>> getAllBooking(){
	  return new ResponseEntity<List<BookingDetails>>(bookingDetailsService.getAllBookingDetails(),HttpStatus.OK);
  }
  
  @GetMapping("/getFullBookingDetails/{bookingId}/{hotelId}/{roomId}/{userId}")
  public ResponseEntity<?> getFullBookingDetails(@PathVariable("bookingId") int bookingId, @PathVariable("hotelId") int hotelId,
		  @PathVariable("roomId") int roomId, @PathVariable("userId") int userId) {
	  return bookingDetailsService.getFullBookingDetails(bookingId,hotelId,roomId,userId);
  }
  
  

}
